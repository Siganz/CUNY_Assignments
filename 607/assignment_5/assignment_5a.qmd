---
title: "assignment_5a"
format: html
toc: true
toc-depth: 5
toc-location: left
---

```{r}
library(tidyverse)
```

## Approach

I should be able to recreate this table.

```{r}
df <- tibble(
  airline = c("", "ALASKA", "", "", "AM WEST",""),
  status  = c("", "on time", "delayed", "", "on time", "delayed"),
  city_1 = c("Los Angeles", 497, 62, " ", 694, 117),
  city_2 = c("Phoenix", 221, 12, " ", 4840, 415),
  city_3 = c("San Diego", 212, 20, " ", 383, 65),
  city_4 = c("San Francisco", 503, 102, " ", 320, 129),
  city_5 = c("Seattke", 1841, 305, " ", 201, 61)
)
df
```

I didn't read the instructions, says I need to create a csv, so I'll do that and then read it into R.

```{r}
df <- read_csv("weird_table.csv")
df
```

![weird table](weird_table.png)

*Submitted data file with at least some count analysis (+45)*
Ok, so we can do a count of total flights, count of flights per location, counts of flights per airline. 

*Recreated File in Same Format as given, including missing data where there were empty cells in source data. (+5)*
I recreated the table in excel, formatted it into a csv with the empty fields. So we are ok on that.

*Placed file in Internet-accessible location, such as a publicly-accessible GitHub repo.  Also OK (if less scaleable) to generated and populated dataframe from code. (+5)*
I placed it into my folder and called it via cwd, so this should work fine.

*Provided code to populate missing data. (+5)*
Populate missing data? Oh, maybe he wants us to do a Global Baseline Estimate for the missing row? Probably not. Maybe just to `fill(x, .direction = "down")` down the airline field. 

*Transformed data from wide to long format. (+10)*
Ok, so `pivot_longer()` to combine all the cities into one column called `cities` with their values to `time`. That way we have airline, flights, and times. 

*Compared percentage (not just counts) of either delays or arrival rates for two airlines overall. [Either with a chart, or a table; both would be exemplary].  Include text summarizes findings from this comparison. (+10)*

We can get the total then divide the total by the sum of delayed * 100 to get the percentage. We can do a `filter` choosing either delay or arrival, get the total, get the percentage of delayed flights per airline using `summarization()`. 

*Compared percentage (not just counts) of either delays or arrival rates for two airlines across five cities. [Either with a chart, or a table; both would be exemplary].  Include text summarizes findings from this comparison. (+10)*

Same thing as the previous, we would just summarize by airline, city. However, it makes sense to widen flights. 

*Describe discrepancy between comparing two airlinesâ€™ flight performances city-by-city and overall. (+5)*

Summarize by carrier & cities. 

### Codebase

```{r}
df2 <- df |>
  rename(airline = ...1, status = ...2) |>
  filter(!is.na(status)) |>
  fill(airline, .direction = "down") |>
  pivot_longer(c("Los Angeles", "Phoenix", "San Diego", "San Francisco", "Seattle"), names_to = "city", values_to = "flights")

# Answers # 1
glue::glue("Total flights:\n",sum(df2$flights))
df2 |> group_by(airline, city) |> summarize(total_flights = sum(flights)) |> arrange(airline, city)

# Answers # 2
df <- read_csv("weird_table.csv")
df



```


```{r}
```